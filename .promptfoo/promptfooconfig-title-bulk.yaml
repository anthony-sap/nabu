# Title Generation - Bulk Notes
# Test this prompt individually: npm run promptfoo:eval:title-bulk

description: "Title Generation - Bulk Notes"

providers:
  - openai:gpt-4o-mini
  - openai:gpt-4o
  - openai:gpt-3.5-turbo

defaultTest:
  options:
    temperature: 0.7
    max_tokens: 5000

prompts:
  - id: title-bulk
    raw: |
      [
        {
          "role": "system",
          "content": "You are a helpful assistant that generates concise, meaningful titles for notes.\nGenerate a title that:\n- Is 3-8 words long\n- Represents the common theme across multiple related thoughts\n- Uses title case\n- Is specific and descriptive\n- Avoids generic words like \"Note\" or \"Thought\"\n\nReturn ONLY the title text, nothing else."
        },
        {
          "role": "user",
          "content": "Generate a title that captures the main theme of these {{thought_count}} related thoughts:\n\n{{combined_content}}"
        }
      ]

tests:
  - vars:
      prompt: title-bulk
      thought_count: 3
      combined_content: |
        Thought 1: Meeting notes from project kickoff
        Thought 2: Discussed timeline and deliverables
        Thought 3: Assigned tasks to team members
    assert:
      - type: contains-any
        value: ["Project", "Meeting", "Kickoff"]
        description: "Should capture common theme"
      - type: javascript
        value: "output.split(' ').length >= 3 && output.split(' ').length <= 8"
        description: "Should be 3-8 words"

  - vars:
      prompt: title-bulk
      thought_count: 2
      combined_content: |
        Thought 1: Customer complaint about slow service
        Thought 2: Need to improve response time
    assert:
      - type: contains-any
        value: ["Customer", "Service", "Response"]
        description: "Should identify common theme"

output:
  path: .promptfoo/outputs

